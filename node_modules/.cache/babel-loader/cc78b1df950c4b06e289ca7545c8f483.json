{"ast":null,"code":"var _jsxFileName = \"/Users/ananthkashyap/Documents/GitHub/launch.everaise/src/components/saquestion.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { CheckCircleIcon, QuestionMarkCircleIcon, XCircleIcon } from '@heroicons/react/solid';\nimport { useParams } from 'react-router-dom';\nimport firebase from 'firebase/app';\nimport { database, increment } from '../firebase';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SAQuestion(props) {\n  _s();\n\n  const {\n    assignmentId\n  } = useParams();\n\n  const Latex = require('react-latex');\n\n  const [message, setMessage] = useState('');\n  const [confirmation, setConfirmation] = useState('');\n  const [error, setError] = useState('');\n  const [updateData, setUpdateData] = useState(false);\n  const {\n    currentUser\n  } = useAuth();\n  const [disabled, setDisabled] = useState(false);\n  const [response, setResponse] = useState('');\n  const [append, setAppend] = useState(false);\n  const [latex, setLatex] = useState('');\n  let userData = null;\n  let solution = null;\n\n  if (props.course === 'physics') {\n    solution = /*#__PURE__*/_jsxDEV(\"img\", {\n      src: props.solution,\n      alt: \"\",\n      className: \"w-full rounded-md\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 16\n    }, this);\n    userData = database.physics_users;\n  } else if (props.course === 'math') {\n    solution = /*#__PURE__*/_jsxDEV(\"img\", {\n      src: props.solution,\n      alt: \"\",\n      className: \"w-full rounded-md\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 16\n    }, this);\n    userData = database.math_users;\n  } else if (props.course === 'biology') {\n    solution = /*#__PURE__*/_jsxDEV(Latex, {\n      children: props.soution\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 16\n    }, this);\n    userData = database.biology_users;\n  } else if (props.course === 'astronomy') {\n    solution = /*#__PURE__*/_jsxDEV(\"img\", {\n      src: props.solution,\n      alt: \"\",\n      className: \"w-full rounded-md\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 16\n    }, this);\n    userData = database.astronomy_users;\n  }\n\n  useEffect(() => {\n    setResponse(props.userAnswer);\n\n    if (props.attempts === 1) {\n      setAppend(true);\n      setMessage('You have earned ' + props.points + ' points. Solution: ');\n      setDisabled(true);\n    } else if (props.attempts === 0) {\n      setAppend(true);\n      setError('Solution: ');\n      setDisabled(true);\n    }\n  }, [props.completed, props.userAnswer, props.attempts, props.points, assignmentId]);\n\n  function UpdateStatus(status) {\n    userData.doc(currentUser.email).collection('assignments').doc(props.id).collection('questions').doc(String(props.number)).update({\n      completed: status\n    }).finally(() => {\n      setUpdateData(!updateData);\n    });\n  }\n\n  useEffect(() => {\n    userData.doc(currentUser.email).collection('assignments').doc(props.id).collection('questions').doc(String(props.number)).update({\n      status: response\n    });\n    console.log(true);\n  }, [userData, response, currentUser.email, props.id, props.number]);\n\n  function UpdateSubmissions(number) {\n    userData.doc(currentUser.email).collection('assignments').doc(props.id).collection('questions').doc(String(props.number)).update({\n      attempts: number\n    }).finally(() => {\n      setUpdateData(!updateData);\n    });\n  }\n\n  function CheckAnswer(event) {\n    setConfirmation('');\n    event.preventDefault();\n    setMessage('');\n    setError('');\n\n    if (response.trim() === String(props.answer)) {\n      setDisabled(true);\n      UpdateStatus(true);\n      UpdateSubmissions(1);\n      setAppend(true);\n      setMessage('You have earned ' + props.points + ' points. Solution: ');\n      let Promises = [];\n      Promises.push(userData.doc(currentUser.email).update({\n        points: firebase.firestore.FieldValue.increment(props.points)\n      }));\n      Promises.push(userData.doc(currentUser.email).collection('assignments').doc(assignmentId).update({\n        earned: firebase.firestore.FieldValue.increment(props.points)\n      }));\n      Promises.push(userData.doc(currentUser.email).collection('assignments').doc(assignmentId).update({\n        completed: increment\n      }));\n      Promise.all(Promises);\n    } else {\n      setError('Sorry, that is not correct');\n    }\n  }\n\n  function GiveUp(event) {\n    event.preventDefault();\n    setConfirmation('Are you sure you want to give up on this question?');\n  }\n\n  function Confirmed(event) {\n    event.preventDefault();\n    UpdateStatus(true);\n    UpdateSubmissions(0);\n    setConfirmation('');\n    setDisabled(true);\n    setAppend(true);\n    setError('Solution: ');\n    userData.doc(currentUser.email).collection('assignments').doc(assignmentId).update({\n      completed: increment\n    });\n    setLatex('');\n  }\n\n  function NotConfirmed(event) {\n    event.preventDefault();\n    setConfirmation('');\n  }\n\n  function GetLatexRender(event) {\n    event.preventDefault();\n    setLatex(response);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: CheckAnswer,\n      action: \"#\",\n      method: \"POST\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"about\",\n        name: \"about\",\n        rows: 3,\n        className: \"mt-4 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border-gray-300 rounded-md\",\n        defaultValue: response,\n        disabled: disabled,\n        onChange: e => {\n          setResponse(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mt-4 relative z-0 inline-flex rounded-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: disabled,\n          type: \"submit\",\n          className: disabled ? \"-ml-px relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-300 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\" : \"-ml-px relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: GetLatexRender,\n          className: \"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\",\n          children: \"Render LaTeX\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: disabled,\n          onClick: GiveUp,\n          type: \"button\",\n          className: disabled ? \"-ml-px relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-300 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\" : \"-ml-px relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\",\n          children: \"Give Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), confirmation && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 rounded-md bg-red-50 p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(QuestionMarkCircleIcon, {\n              className: \"h-5 w-5 text-red-400\",\n              \"aria-hidden\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm text-red-800\",\n              children: confirmation\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"-mx-2 -my-1.5 flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: Confirmed,\n                  type: \"button\",\n                  className: \"bg-red-50 px-2 py-1.5 rounded-md text-sm font-medium text-red-800 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600\",\n                  children: \"Yes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: NotConfirmed,\n                  type: \"button\",\n                  className: \"ml-3 bg-red-50 px-2 py-1.5 rounded-md text-sm font-medium text-red-800 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600\",\n                  children: \"No\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }, this), latex && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 rounded-md bg-green-50 p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm text-green-800\",\n              children: /*#__PURE__*/_jsxDEV(Latex, {\n                children: latex\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 56\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 rounded-md bg-green-50 p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n              className: \"h-5 w-5 text-green-400\",\n              \"aria-hidden\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3 mr-7\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm text-green-800\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: append ? 'font-semibold mb-2' : 'font-semibold',\n                children: message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 56\n              }, this), \" \", append ? solution : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 rounded-md bg-red-50 p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(XCircleIcon, {\n              className: \"h-5 w-5 text-red-400\",\n              \"aria-hidden\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3 mr-7\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm text-red-800\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: append ? 'font-semibold mb-2' : 'font-semibold',\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 54\n              }, this), \" \", append ? solution : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SAQuestion, \"1yXPqSD+1fYsXrKQUxvyKYKSAxM=\", false, function () {\n  return [useParams, useAuth];\n});\n\n_c = SAQuestion;\n\nvar _c;\n\n$RefreshReg$(_c, \"SAQuestion\");","map":{"version":3,"sources":["/Users/ananthkashyap/Documents/GitHub/launch.everaise/src/components/saquestion.jsx"],"names":["useState","useEffect","CheckCircleIcon","QuestionMarkCircleIcon","XCircleIcon","useParams","firebase","database","increment","useAuth","SAQuestion","props","assignmentId","Latex","require","message","setMessage","confirmation","setConfirmation","error","setError","updateData","setUpdateData","currentUser","disabled","setDisabled","response","setResponse","append","setAppend","latex","setLatex","userData","solution","course","physics_users","math_users","soution","biology_users","astronomy_users","userAnswer","attempts","points","completed","UpdateStatus","status","doc","email","collection","id","String","number","update","finally","console","log","UpdateSubmissions","CheckAnswer","event","preventDefault","trim","answer","Promises","push","firestore","FieldValue","earned","Promise","all","GiveUp","Confirmed","NotConfirmed","GetLatexRender","e","target","value"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport { CheckCircleIcon, QuestionMarkCircleIcon, XCircleIcon } from '@heroicons/react/solid'\nimport { useParams } from 'react-router-dom'\nimport firebase from 'firebase/app'\nimport { database, increment } from '../firebase'\nimport { useAuth } from '../contexts/AuthContext'\n\nexport default function SAQuestion(props) {\n  const { assignmentId } = useParams()\n  const Latex = require('react-latex')\n  const [message, setMessage] = useState('')\n  const [confirmation, setConfirmation] = useState('')\n  const [error, setError] = useState('')\n  const [updateData, setUpdateData] = useState(false)\n  const { currentUser } = useAuth()\n  const [disabled, setDisabled] = useState(false)\n  const [response, setResponse] = useState('')\n  const [append, setAppend] = useState(false)\n  const [latex, setLatex] = useState('')\n\n  let userData = null\n  let solution = null\n\n  if (props.course === 'physics') {\n    solution = <img src={props.solution} alt=\"\" className=\"w-full rounded-md\"/>\n    userData = database.physics_users\n  } else if (props.course === 'math') {\n    solution = <img src={props.solution} alt=\"\" className=\"w-full rounded-md\"/>\n    userData = database.math_users\n  } else if (props.course === 'biology') {\n    solution = <Latex>{props.soution}</Latex>\n    userData = database.biology_users\n  } else if (props.course === 'astronomy') {\n    solution = <img src={props.solution} alt=\"\" className=\"w-full rounded-md\"/>\n    userData = database.astronomy_users\n  }\n\n  useEffect(() => {\n    setResponse(props.userAnswer)\n    if (props.attempts === 1) {\n      setAppend(true)\n      setMessage('You have earned ' + props.points + ' points. Solution: ')\n      setDisabled(true)\n    } else if (props.attempts === 0) {\n      setAppend(true)\n      setError('Solution: ')\n      setDisabled(true)\n    }\n  }, [props.completed, props.userAnswer, props.attempts, props.points, assignmentId])\n\n  function UpdateStatus(status) {\n    userData.doc(currentUser.email).collection('assignments').doc(props.id)\n      .collection('questions').doc(String(props.number)).update({\n        completed: status\n      }).finally(() => {\n        setUpdateData(!updateData)\n      })\n  }\n\n  useEffect(() => {\n    userData.doc(currentUser.email).collection('assignments')\n      .doc(props.id).collection('questions').doc(String(props.number)).update({\n        status: response,\n      })\n    console.log(true)\n  }, [userData, response, currentUser.email, props.id, props.number])\n\n  function UpdateSubmissions(number) {\n    userData.doc(currentUser.email).collection('assignments').doc(props.id).collection('questions')\n      .doc(String(props.number)).update({\n        attempts: number\n      }).finally(() => {\n        setUpdateData(!updateData)\n      })\n  }\n\n\n  function CheckAnswer(event) {\n    setConfirmation('')\n    event.preventDefault()\n    setMessage('')\n    setError('')\n    if (response.trim() === String(props.answer)) {\n      setDisabled(true)\n      UpdateStatus(true)\n      UpdateSubmissions(1)\n      setAppend(true)\n      setMessage('You have earned ' + props.points + ' points. Solution: ')\n      let Promises = []\n      Promises.push(userData.doc(currentUser.email).update({\n        points: firebase.firestore.FieldValue.increment(props.points)\n      }))\n      Promises.push(userData.doc(currentUser.email).collection('assignments').doc(assignmentId).update({\n        earned: firebase.firestore.FieldValue.increment(props.points)\n      }))\n      Promises.push(userData.doc(currentUser.email).collection('assignments').doc(assignmentId).update({\n        completed: increment\n      }))\n      Promise.all(Promises)\n    } else {\n      setError('Sorry, that is not correct')\n    }\n  }\n\n  function GiveUp(event) {\n    event.preventDefault()\n    setConfirmation('Are you sure you want to give up on this question?')\n  }\n\n  function Confirmed(event) {\n    event.preventDefault()\n    UpdateStatus(true)\n    UpdateSubmissions(0)\n    setConfirmation('')\n    setDisabled(true)\n    setAppend(true)\n    setError('Solution: ')\n    userData.doc(currentUser.email).collection('assignments').doc(assignmentId).update({\n      completed: increment\n    })\n    setLatex('')\n  }\n\n  function NotConfirmed(event) {\n    event.preventDefault()\n    setConfirmation('')\n  }\n\n  function GetLatexRender(event) {\n    event.preventDefault()\n    setLatex(response)\n  }\n\n\n  return (\n    <div>\n      <form onSubmit={CheckAnswer} action=\"#\" method=\"POST\">\n        <textarea\n          id=\"about\"\n          name=\"about\"\n          rows={3}\n          className=\"mt-4 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border-gray-300 rounded-md\"\n          defaultValue={response}\n          disabled={disabled}\n          onChange={e => { setResponse(e.target.value) }}\n        ></textarea>\n        <span className=\"mt-4 relative z-0 inline-flex rounded-md\">\n          <button\n            disabled={disabled}\n            type=\"submit\"\n            className={disabled ? \"-ml-px relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-300 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\" :\n              \"-ml-px relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\"}\n          >\n            Submit\n          </button>\n          <button\n            type=\"button\"\n            onClick={GetLatexRender}\n            className=\"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\"\n          >\n            Render LaTeX\n          </button>\n          <button\n            disabled={disabled}\n            onClick={GiveUp}\n            type=\"button\"\n            className={disabled ? \"-ml-px relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-300 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\" :\n              \"-ml-px relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\"}\n          >\n            Give Up\n          </button>\n        </span>\n        {confirmation &&\n          <div className=\"mt-4 rounded-md bg-red-50 p-4\">\n            <div className=\"flex\">\n              <div className=\"flex-shrink-0\">\n                <QuestionMarkCircleIcon className=\"h-5 w-5 text-red-400\" aria-hidden=\"true\" />\n              </div>\n              <div className=\"ml-3\">\n                <h3 className=\"text-sm text-red-800\">{confirmation}</h3>\n                <div className=\"mt-2\">\n                  <div className=\"-mx-2 -my-1.5 flex\">\n                    <button\n                      onClick={Confirmed}\n                      type=\"button\"\n                      className=\"bg-red-50 px-2 py-1.5 rounded-md text-sm font-medium text-red-800 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600\"\n                    >\n                      Yes\n                    </button>\n                    <button\n                      onClick={NotConfirmed}\n                      type=\"button\"\n                      className=\"ml-3 bg-red-50 px-2 py-1.5 rounded-md text-sm font-medium text-red-800 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600\"\n                    >\n                      No\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        }\n        {latex &&\n          <div className=\"mt-4 rounded-md bg-green-50 p-4\">\n            <div className=\"flex\">\n              <div className=\"ml-3\">\n                <h3 className=\"text-sm text-green-800\"><Latex>{latex}</Latex></h3>\n              </div>\n            </div>\n          </div>\n        }\n        {message &&\n          <div className=\"mt-4 rounded-md bg-green-50 p-4\">\n            <div className=\"flex\">\n              <div className=\"flex-shrink-0\">\n                <CheckCircleIcon className=\"h-5 w-5 text-green-400\" aria-hidden=\"true\" />\n              </div>\n              <div className=\"ml-3 mr-7\">\n                <h3 className=\"text-sm text-green-800\"><p className={append ? 'font-semibold mb-2' : 'font-semibold'}>{message}</p> {append ? solution : ''}</h3>\n              </div>\n            </div>\n          </div>\n        }\n        {error && \n          <div className=\"mt-4 rounded-md bg-red-50 p-4\">\n            <div className=\"flex\">\n              <div className=\"flex-shrink-0\">\n                <XCircleIcon className=\"h-5 w-5 text-red-400\" aria-hidden=\"true\" />\n              </div>\n              <div className=\"ml-3 mr-7\">\n                <h3 className=\"text-sm text-red-800\"><p className={append ? 'font-semibold mb-2' : 'font-semibold'}>{error}</p> {append ? solution : ''}</h3>  \n              </div>\n            </div>\n          </div>\n        }\n      </form>\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}